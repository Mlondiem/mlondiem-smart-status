class SmartStatus{constructor(txt,target){this._dom_self={wrapper:$('<div class="smart-status" data-id="smart-">'),spinner:$('<span class="fa fa-spinner fa-spin"/>'),banner:$('<span class="smart-status-msg">Loading...</span>'),close_btn:$('<span class="fa fa-times close" data-dismiss="alert"/>').click(function(e){$(this).parent().fadeOut("slow")}),setup:function(){this.wrapper.append(this.spinner);this.wrapper.append(this.banner);this.wrapper.append(this.close_btn)}};this._dom_self.setup();if(txt)this.msg=txt;if(target)this.attach(target)}_dom_self={};id="";attach(target,overwrite){if(target&&target!==document.body){let target_id=target.attr("id");if(target_id===""){console.error("SmartStatus cannot use target with no id");this.destroy();return false}let use_id="smart-"+target_id;if(!this.find(use_id)){this._dom_self.wrapper.css({left:getComputedStyle(target[0]).left,top:getComputedStyle(target[0]).bottom});this._dom_self.wrapper.appendTo(document.body);this._dom_self.wrapper.attr("data-id",use_id)}else if(overwrite){let restore_msg=this.msg;this._dom_self.wrapper=$('div[data-id="'+use_id+'"]');this._dom_self.spinner=this._dom_self.wrapper.find("span.fa-spinner");this._dom_self.banner=this._dom_self.wrapper.find("span.smart-status-msg");this._dom_self.close_btn=this._dom_self.wrapper.find("span.close");this.msg=restore_msg}else{console.error("Cannot attach new SmartStatus on used target");return false}window._smart_statuses[use_id]=this;return this}else{if(!this.find("_global_smart_status_")){this._dom_self.wrapper.attr("data-id","_global_smart_status_");this._dom_self.wrapper.appendTo(document.body);window._smart_statuses["_global_smart_status_"]=this;return this}else{console.error("Cannot attach new SmartStatus on used global target");return false}}}destroy(){this._dom_self.wrapper.remove();delete window._smart_statuses[this._dom_self.wrapper.attr("data-id")]}reset(){this.msg="Loading...";this._dom_self.spinner.attr("class","fa fa-spinner fa-spin");return this}show(txt){if(txt)this.msg=txt;this._dom_self.wrapper.fadeIn("slow");return this}hide(duration){this._dom_self.wrapper.fadeOut(duration?duration:1500);return this}final(txt,success){this._dom_self.spinner.removeClass("fa-spinner").removeClass("fa-spin");this._dom_self.banner.html(txt);if(success)this._dom_self.spinner.addClass("fa-check");else this._dom_self.spinner.addClass("fa-exclamation-triangle");return this}get version(){return"0.9.2"}get msg(){return this._dom_self.banner.html()}set msg(str){this._dom_self.banner.html(str)}get id(){return this.id}}SmartStatus.prototype.find=function(id){if(typeof window._smart_statuses[id]!="undefined")return window._smart_statuses[id];return false};window._smart_statuses=[];